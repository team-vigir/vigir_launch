<?xml version="1.0"?>

<launch>
  <!-- Set laser_scan_topic to the robot topic as default -->
  <arg name="lidar_topic" default="/multisense_sl/laser/scan" />
  
  <!-- Convert laser scan to 3D point cloud in sensor frame -->
  <node pkg="flor_laserscan_to_pointcloud" type="laserscan_to_pointcloud_node" name="scan_to_ptcld" respawn="true">
    <param name="min_range" value="0.3" />
    <param name="use_high_fidelity_projection" value="false" />
    <param name="target_frame" value="head_hokuyo_frame" />
    <remap from="/scan" to="$(arg lidar_topic)" />
    <rosparam command="load" file="$(find flor_laserscan_to_pointcloud)/config/atlas_scan_filter.yaml" />
  </node>

  <!-- Filter the scan cloud to remove robot intersections -->
  <include file="$(find vigir_self_filter)/launch/self_filter_lidar.launch" />
  
  <!-- Start the spindle with default speed -->
  <node type="rostopic" pkg="rostopic" name="spindle_speed_cmd" respawn="false" args="pub --once /multisense/set_spindle_speed std_msgs/Float64 '{data: 3.0}'" output="screen"  />

</launch>

